<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Password Game - Level 4</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      background: #000;
      color: #00ff00;
      font-family: monospace;
      animation: flicker 1.5s infinite;
    }

    @keyframes flicker {
      0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
        background-color: #000;
      }
      20%, 22%, 24%, 55% {
        background-color: #111;
      }
    }

    input[type="text"] {
      width: 100%;
      padding: 10px;
      font-size: 1.5em;
      background: #111;
      color: #0f0;
      border: 2px solid #0f0;
      border-radius: 5px;
      outline: none;
    }

    .rule {
      margin: 6px 0;
    }

    .pass {
      color: #0f0;
    }

    .fail {
      color: #f33;
    }

    #winFlash {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle, gold, transparent);
      opacity: 0;
      z-index: 999;
      pointer-events: none;
      transition: opacity 1s ease-out;
    }

    #nextButton {
      display: none;
      margin-top: 20px;
      padding: 10px 20px;
      background: #fff200;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      font-weight: bold;
      color: black;
    }

    #nextButton:hover {
      background: #ffe600;
    }
  </style>
</head>
<body>
  <h1>üîê PASSWORD GAME: LEVEL 4 üîê</h1>
  <p>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏≤‡∏ß 8 ‡∏ï‡∏±‡∏ß </p>
  <input type="text" id="password" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...">
  <div id="rules"></div>
  <div id="winFlash"></div>
  <button id="nextButton" onclick="location.href='level5.html'">‚ñ∂Ô∏è ‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>

  <script>
    const input = document.getElementById("password");
    const rulesContainer = document.getElementById("rules");
    const flash = document.getElementById("winFlash");
    const nextBtn = document.getElementById("nextButton");

    function isPrime(n) {
      if (n < 2) return false;
      for (let i = 2; i <= Math.sqrt(n); i++) {
        if (n % i === 0) return false;
      }
      return true;
    }

    const rulesList = [
      { text: "1. ‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏≤‡∏ß‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö 8 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£", test: pw => pw.length === 8 },
      { text: "2. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏±‡∏ß", test: pw => /[A-Z]/.test(pw) },
      { text: "3. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏±‡∏ß", test: pw => /[a-z]/.test(pw) },
      { text: "4. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏±‡∏ß (‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡πÄ‡∏•‡∏Ç 0)", test: pw => /\d/.test(pw) && !pw.includes("0") },
      { text: "5. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ï‡∏±‡∏ß (@#%&*)", test: pw => /[@#%&*]/.test(pw) },
      { text: "6. ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏ã‡πâ‡∏≥‡πÄ‡∏•‡∏¢", test: pw => new Set(pw).size === pw.length },
      { text: "7. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ô (‡πÄ‡∏ä‡πà‡∏ô aB ‡∏´‡∏£‡∏∑‡∏≠ Zt)", test: pw => /([a-z][A-Z])|([A-Z][a-z])/.test(pw) },
      { text: "8. ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà 4 ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç", test: pw => pw.length >= 4 && /\d/.test(pw[3]) },
      { text: "9. ‡∏ï‡∏±‡∏ß‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà", test: pw => /[A-Z]$/.test(pw) },
      { text: "10. ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç", test: pw => !/^\d/.test(pw) },
      { text: "11. ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡∏Ñ‡∏≥‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ (‡πÄ‡∏ä‡πà‡∏ô pass, admin, cat)", test: pw => !/(pass|admin|cat|dog|test)/i.test(pw) },
      {
        text: "12. ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞",
        test: pw => {
          const digits = pw.match(/\d/g) || [];
          const sum = digits.reduce((a, b) => a + Number(b), 0);
          return digits.length > 0 && isPrime(sum);
        }
      },
      {
        text: "13. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß",
        test: pw => (pw.match(/\d/g) || []).length >= 3
      }
    ];

    let hasWon = false;

    function updateRules() {
      const pw = input.value;
      rulesContainer.innerHTML = "";
      let passedAll = true;

      rulesList.forEach(rule => {
        const passed = rule.test(pw);
        if (!passed) passedAll = false;
        const div = document.createElement("div");
        div.className = "rule " + (passed ? "pass" : "fail");
        div.textContent = (passed ? "‚úÖ " : "‚ùå ") + rule.text;
        rulesContainer.appendChild(div);
      });

      if (passedAll && !hasWon && pw.length === 8) {
        hasWon = true;
        input.disabled = true;

        const winMsg = document.createElement("h2");
        winMsg.textContent = "üéâ ‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!";
        winMsg.style.color = "gold";
        rulesContainer.appendChild(winMsg);

        flash.style.opacity = 1;
        setTimeout(() => {
          flash.style.opacity = 0;
          nextBtn.style.display = "inline-block";
        }, 1000);
      }
    }

    input.addEventListener("input", updateRules);
    updateRules();
  </script>
</body>
</html>
