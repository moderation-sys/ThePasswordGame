<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Password Game - Level 3 (Harder)</title>
  <style>
    body {
      margin: 0; padding: 0;
      font-family: 'Courier New', monospace;
      background: black;
      color: #00ff00;
      padding: 20px;
      animation: flicker 1s infinite;
    }
    @keyframes flicker {
      0%,19%,21%,23%,25%,54%,56%,100% { background-color: black; }
      20%,22%,24%,55% { background-color: #1a1a1a; }
    }
    input[type="text"] {
      width: 100%;
      padding: 10px;
      font-size: 1.2em;
      background: #111;
      color: #0f0;
      border: 2px solid #0f0;
      border-radius: 5px;
      outline: none;
    }
    .rule { margin: 5px 0; }
    .pass { color: #0f0; }
    .fail { color: #f33; }
    #winFlash {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle, gold, transparent);
      opacity: 0;
      z-index: 999;
      pointer-events: none;
      transition: opacity 1s ease-out;
    }
    #nextButton {
      display: none;
      margin-top: 20px;
      padding: 10px 20px;
      background: #fff200;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      font-weight: bold;
      color: black;
    }
    #nextButton:hover { background: #ffe600; }
  </style>
</head>
<body>
  <h1>üß† PASSWORD GAME: LEVEL 3 (Harder) üß†</h1>
  <p>‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏é‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ</p>
  <input type="text" id="password" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô..."/>
  <div id="rules"></div>
  <div id="winFlash"></div>
  <button id="nextButton" onclick="location.href='level4.html'">‚ñ∂Ô∏è ‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>

<script>
  const now = new Date();
  const todayDate = now.getDate();
  const currentMonth = now.toLocaleString('en-US', { month: 'long' });
  const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
  const todayName = dayNames[now.getDay()];

  const forbiddenSequences = ["abc", "123", "password", "admin", "qwerty"];

  const rulesList = [
    { text: "1. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 16 ‡∏ï‡∏±‡∏ß", test: pw => pw.length >= 16 },
    { text: "2. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß", test: pw => (pw.match(/[A-Z]/g)||[]).length >= 3 },
    { text: "3. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 4 ‡∏ï‡∏±‡∏ß", test: pw => (pw.match(/[a-z]/g)||[]).length >= 4 },
    { text: "4. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß (‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡πÄ‡∏•‡∏Ç 0)", test: pw => {
      const nums = pw.match(/\d/g)||[];
      return nums.length >= 3 && !pw.includes("0");
    }},
    { text: "5. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß (!@#$%^&*)", test: pw => (pw.match(/[!@#$%^&*]/g)||[]).length >= 3 },
    { text: `6. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ (‡πÄ‡∏ä‡πà‡∏ô ${todayName})`, test: pw => pw.includes(todayName) },
    { text: "7. ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ã‡πâ‡∏≥‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô", test: pw => !/(.)\\1/.test(pw) },
    { text: "8. ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ 5 ‡∏•‡∏á‡∏ï‡∏±‡∏ß", test: pw => {
      const nums = pw.match(/\d/g)||[];
      const sum = nums.reduce((a,b)=>a+parseInt(b),0);
      return sum > 0 && sum % 5 === 0;
    }},
    { text: "9. ‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£", test: pw => /^[A-Za-z]/.test(pw) },
    { text: "10. ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏û‡∏¥‡πÄ‡∏®‡∏© (!@#$%^&*)", test: pw => /[!@#$%^&*]$/.test(pw) },
    { text: "11. ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡∏Ñ‡∏≥‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏≤‡∏á‡πà‡∏≤‡∏¢ (abc, 123, password, admin, qwerty)", test: pw => !forbiddenSequences.some(seq => pw.toLowerCase().includes(seq)) },
    { text: "12. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Unicode symbol (‡πÄ‡∏ä‡πà‡∏ô ‚òÖ, ‚òÜ, ‚ú™, ‡∏´‡∏£‡∏∑‡∏≠ emojis)", test: pw => /[\u2600-\u26FF\u2700-\u27BF\u1F300-\u1F5FF\u1F600-\u1F64F]/u.test(pw) }
  ];

  const input = document.getElementById("password");
  const rulesContainer = document.getElementById("rules");
  const flash = document.getElementById("winFlash");
  const nextBtn = document.getElementById("nextButton");

  let hasWon = false;

  function updateRules() {
    const pw = input.value;
    rulesContainer.innerHTML = "";
    let passedAll = true;

    rulesList.forEach(rule => {
      const passed = rule.test(pw);
      if (!passed) passedAll = false;
      const div = document.createElement("div");
      div.className = "rule " + (passed ? "pass" : "fail");
      div.textContent = (passed ? "‚úÖ " : "‚ùå ") + rule.text;
      rulesContainer.appendChild(div);
    });

    if (passedAll && !hasWon && pw.length > 0) {
      hasWon = true;
      input.disabled = true;

      const winMsg = document.createElement("h2");
      winMsg.textContent = "üéâ ‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!";
      winMsg.style.color = "gold";
      rulesContainer.appendChild(winMsg);

      flash.style.opacity = 1;
      setTimeout(() => {
        flash.style.opacity = 0;
        nextBtn.style.display = "inline-block";
      }, 1000);
    }
  }

  input.addEventListener("input", updateRules);
  updateRules();
</script>
</body>
</html>
