<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Password Game - Level 5</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      background: #000;
      color: #00ff00;
      font-family: monospace;
      animation: flicker 1.5s infinite;
      user-select: none;
    }

    @keyframes flicker {
      0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
        background-color: #000;
      }
      20%, 22%, 24%, 55% {
        background-color: #111;
      }
    }

    input[type="text"] {
      width: 100%;
      padding: 10px;
      font-size: 1.5em;
      background: #111;
      color: #0f0;
      border: 2px solid #0f0;
      border-radius: 5px;
      outline: none;
      letter-spacing: 2px;
    }

    .rule {
      margin: 6px 0;
    }

    .pass {
      color: #0f0;
    }

    .fail {
      color: #f33;
    }

    #winFlash {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: radial-gradient(circle, gold, transparent);
      opacity: 0;
      z-index: 999;
      pointer-events: none;
      transition: opacity 1s ease-out;
    }

    #nextButton {
      display: none;
      margin-top: 20px;
      padding: 10px 20px;
      background: #fff200;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      font-weight: bold;
      color: black;
    }

    #nextButton:hover {
      background: #ffe600;
    }
  </style>
</head>
<body>
  <h1>üîê PASSWORD GAME: LEVEL 5üîê</h1>
  <p>‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ (‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß)</p>
  <input type="text" id="password" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...">
  <div id="rules"></div>
  <div id="winFlash"></div>
  <button id="nextButton" onclick="location.href='level6.html'">‚ñ∂Ô∏è ‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>

  <script>
    const input = document.getElementById("password");
    const rulesContainer = document.getElementById("rules");
    const flash = document.getElementById("winFlash");
    const nextBtn = document.getElementById("nextButton");

    function isPrime(n) {
      if (n < 2) return false;
      for (let i = 2; i <= Math.sqrt(n); i++) {
        if (n % i === 0) return false;
      }
      return true;
    }

    const rulesList = [
      {
        text: "1. ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 12 ‡∏ï‡∏±‡∏ß",
        test: pw => pw.length >= 12
      },
      {
        text: "2. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà 3 ‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ",
        test: pw => (pw.match(/[A-Z]/g) || []).length >= 3
      },
      {
        text: "3. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà 4 ‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ",
        test: pw => (pw.match(/[a-z]/g) || []).length >= 4
      },
      {
        text: "4. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà 4 ‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ (‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡πÄ‡∏•‡∏Ç 0)",
        test: pw => {
          const nums = pw.match(/[1-9]/g) || [];
          const zeros = pw.match(/0/g) || [];
          return nums.length >= 4 && zeros.length === 0;
        }
      },
      {
        text: "5. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß (@#$%^&*!)",
        test: pw => (pw.match(/[@#$%^&*!]/g) || []).length >= 3
      },
      {
        text: "6. ‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ ‡πÅ‡∏•‡∏∞‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 30",
        test: pw => {
          const digits = pw.match(/\d/g) || [];
          const sum = digits.reduce((a,b) => a + Number(b), 0);
          return sum > 30 && isPrime(sum);
        }
      },
      {
        text: "7. ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô",
        test: pw => !/(.)\1{3,}/.test(pw)
      },
      {
        text: "8. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß ‡πÄ‡∏ä‡πà‡∏ô 123 ‡∏´‡∏£‡∏∑‡∏≠ 4567",
        test: pw => {
          for(let i = 0; i < pw.length - 2; i++) {
            let c1 = pw.charCodeAt(i);
            let c2 = pw.charCodeAt(i+1);
            let c3 = pw.charCodeAt(i+2);
            if(/[0-9]/.test(pw[i]) && /[0-9]/.test(pw[i+1]) && /[0-9]/.test(pw[i+2])) {
              if(c1+1 === c2 && c2+1 === c3) return true;
            }
          }
          return false;
        }
      },
      {
        text: "9. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏±‡∏ô 2 ‡∏ï‡∏±‡∏ß‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ ‡πÄ‡∏ä‡πà‡∏ô @@, ##, $$",
        test: pw => /([@#$%^&*!])\1+/.test(pw)
      },
      {
        text: "10. ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏™‡∏≤‡∏°‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô palindrome (‡πÄ‡∏ä‡πà‡∏ô aba, dad, mom)",
        test: pw => {
          for(let i=0; i < pw.length - 2; i++) {
            const tri = pw.substring(i, i+3).toLowerCase();
            if(tri[0] === tri[2] && /[a-z]/.test(tri[0])) return false;
          }
          return true;
        }
      },
      {
        text: "11. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡πá‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å",
        test: pw => {
          let upperIndex = pw.search(/[A-Z]/);
          let lowerIndex = pw.search(/[a-z]/);
          return upperIndex !== -1 && lowerIndex !== -1 && upperIndex < lowerIndex;
        }
      },
      {
        text: "12. ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏•‡∏Ç 7 ‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ö‡πÄ‡∏•‡∏Ç 8 (‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ô 78 ‡∏´‡∏£‡∏∑‡∏≠ 87)",
        test: pw => !(/78|87/.test(pw))
      },
      {
        text: "13. ‡∏ï‡∏±‡∏ß‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô",
        test: pw => /[A-Z@#$%^&*!]$/.test(pw)
      },
      {
        text: "14. ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏£‡∏î‡πâ‡∏ß‡∏¢ 3 ‡∏•‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 ‡∏ï‡∏±‡∏ß",
        test: pw => {
          const digits = pw.match(/\d/g) || [];
          const count = digits.filter(d => Number(d) % 3 === 0).length;
          return count >= 2;
        }
      },
      {
        text: "15. ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 3 ‡∏ï‡∏±‡∏ß‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô ‡πÄ‡∏ä‡πà‡∏ô 321, 654",
        test: pw => {
          for(let i=0; i < pw.length - 2; i++) {
            let c1 = pw.charCodeAt(i);
            let c2 = pw.charCodeAt(i+1);
            let c3 = pw.charCodeAt(i+2);
            if(/[0-9]/.test(pw[i]) && /[0-9]/.test(pw[i+1]) && /[0-9]/.test(pw[i+2])) {
              if(c1 - 1 === c2 && c2 - 1 === c3) return false;
            }
          }
          return true;
        }
      },
      {
        text: "16. ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 20 ‡∏ï‡∏±‡∏ß",
        test: pw => pw.length <= 20
      }
    ];

    let hasWon = false;

    function updateRules() {
      const pw = input.value;
      rulesContainer.innerHTML = "";
      let passedAll = true;

      rulesList.forEach(rule => {
        const passed = rule.test(pw);
        if(!passed) passedAll = false;
        const div = document.createElement("div");
        div.className = "rule " + (passed ? "pass" : "fail");
        div.textContent = (passed ? "‚úÖ " : "‚ùå ") + rule.text;
        rulesContainer.appendChild(div);
      });

      if(passedAll && !hasWon) {
        hasWon = true;
        input.disabled = true;

        const winMsg = document.createElement("h2");
        winMsg.textContent = "üéâ‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏±‡πâ‡∏áüéâ";
        winMsg.style.color = "gold";
        rulesContainer.appendChild(winMsg);

        flash.style.opacity = 1;
        setTimeout(() => {
          flash.style.opacity = 0;
          nextBtn.style.display = "inline-block";
        }, 1200);
      }
    }

    input.addEventListener("input", () => {
      if (!hasWon) updateRules();
    });

    updateRules();
  </script>
</body>
</html>
